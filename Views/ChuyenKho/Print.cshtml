@using KimThanh.ModelsView
@using System.Text
@using KimThanh.Controllers

@model ChuyenKhoController.PrintChuyenKho

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Trang chủ</title>
    <meta http-equiv="Cache-control" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta name="robots" content="noodp,noydir" />
    <meta name="format-detection" content="telephone=no" />
    <meta property="og:site_name" content="" />
    <meta name="description" content=" " />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="" />
    <meta property="og:description" content="" />
    <meta name="format-detection" content="telephone=no" />

    <link rel="stylesheet" type="text/css" href="~/App_Themes/export/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="~/App_Themes/export/css/fonts/Averta/font.css" />
    <link rel="stylesheet" type="text/css" href="~/App_Themes/export/scss/style.css" />
    <link rel="stylesheet" type="text/css" href="~/App_Themes/export/css/fontawesome/css/all.css" />
    <style>
        body {
            font-family: "Times New Roman";
        }
    </style>
</head>
<body>
    <main class="wrapper">
        <div class="">
            <div class="note__header">
                <div class="note__header--time">
                    <!--<img src="images/qrcode.png" alt="img-qrcode" class="img-qrcode" />
                    <div class="detail">
                        <p class="text-time">
                            <span class="date">24/01/2021</span>
                            <span class="clock">14 : 21</span>
                        </p>
                        <p class="text-code">AA783764</p>
                    </div>-->
                </div>
                <div class="note__header--title">
                    <h2 class="title">Phiếu chuyển kho</h2>
                    <p class="number">@Model.data.PCKCODE</p>
                </div>
                <div class="note__header--box" style="border: none;">
                    <!--<p class="text">HDT Về 2021/01/24 Toa 2. KH.R</p>
                    <p class="code">14-07 - 24/01/2021</p>-->
                </div>
            </div>
            <div class="note__body">
                <div class="note__body--header">
                    <div class="left">
                        <p class="des">Người đề nghị: @KimThanh.Database.NhanVien.GetStaffByID(Model.data.NVID ?? Guid.Empty).NVTEN</p>
                        <p class="des">Người duyệt: @KimThanh.Database.NhanVien.GetStaffByCode(Model.data.APPROVEDBY).NVTEN</p>
                        <p class="des">Thủ kho nhập: @Model.data.THUKHONHAP</p>
                        <p class="des">Thủ kho xuất: @Model.data.THUKHOXUAT</p>
                    </div>
                    <div class="right">
                        <p class="des">Ngày: @Model.data.NGAY.Value.ToString("dd/MM/yyyy HH:mm:ss")</p>
                        <p class="des">Số: @Model.data.PCKCODE</p>
                        <p class="des">Kho xuất: @KimThanh.Database.KhoHang.GetKhoBySRID(Model.data.SRXUATID ?? Guid.Empty).KHOTEN</p>
                        <p class="des">Kho nhập: @KimThanh.Database.KhoHang.GetKhoBySRID(Model.data.SRNHAPID ?? Guid.Empty).KHOTEN</p>
                    </div>
                </div>
                <div class="note__body--table">
                    <div class="wrap-height-table table-responsive">
                        <table class="table-pnk display"
                               id="table-phieu-xuat-kho"
                               style="width: 100%">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>VTKN</th>
                                    <th>Mã hàng</th>
                                    <th>Tên hàng</th>
                                    <th>ĐVT</th>
                                    @*<th>Kho xuất</th>
                                    <th>Kho nhập</th>*@
                                    <th>SL</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{ 
                                    int index = 0;
                                    foreach (var item in Model.listData)
                                    {
                                        //int donGia = item.DONGIA == 0 ? 0 : Convert.ToInt32(item.DONGIA);

                                        //StringBuilder mhten = new StringBuilder(item.MHTEN);
                                        //if (item.MHTEN.Length > 36)
                                        //{
                                        //    mhten.Insert(36, "\n");
                                        //}
                                        index++;
                                        <tr>
                                            <td>@index</td>
                                            <td>@item.ViTri</td>
                                            <td style="text-align: left">@item.MHCODE</td>
                                            <td style="text-align: left">@item.MHTEN</td>
                                            <td>@item.DONVI</td>
                                            @*<td>@KimThanh.Database.KhoHang.getbyKHOID(item.KHOXUATID??Guid.Empty).KHOTEN</td>
                                            <td>@KimThanh.Database.KhoHang.getbyKHOID(item.KHONHAPID ?? Guid.Empty).KHOTEN</td>*@
                                            <td>@Convert.ToInt32(item.SOLUONG)</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th style="text-align:right" colspan="5">Tổng cộng:</th>
                                    <th> @Convert.ToInt32(Model.listData.Sum(x => x.SOLUONG))</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
            @*<div class="note__footer">
                <div class="note__footer--row">
                    <div class="box">
                        <p class="sign-name">Giám đốc</p>
                        <p class="font-italic">(ký, ghi rõ họ tên)</p>
                    </div>
                    <div class="box">
                        <p class="sign-name">Người lập phiếu</p>
                        <p class="font-italic">(ký, ghi rõ họ tên)</p>
                    </div>
                    <div class="box">
                        <p class="sign-name">Thủ kho xuất</p>
                        <p class="font-italic">(ký, ghi rõ họ tên)</p>
                    </div>
                    <div class="box">
                        <p class="sign-name">Người vận chuyển</p>
                        <p class="font-italic">(ký, ghi rõ họ tên)</p>
                    </div>
                    <div class="box">
                        <p class="sign-name">Thủ kho nhập</p>
                        <p class="font-italic">(ký, ghi rõ họ tên)</p>
                    </div>
                </div>
            </div>*@
        </div>
    </main>
</body>
</html>
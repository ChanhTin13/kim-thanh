@{
    ViewBag.Title = "NhanVien";
    Layout = "~/Views/Shared/_LayoutMaster.cshtml";
}

<style>

    .table-nv tbody tr.selected td:nth-child(3) {
        color: #ffffff;
    }

    .table-nv tbody tr.selected td:nth-child(2) {
        color: #ffffff;
    }

    .was-validated input:required:valid, input:required.is-valid {
        border-color: #15af76;
        background-image: url('/App_themes/assets/images/btn-tick.png');
        background-repeat: no-repeat;
        background-position: right calc(.375em + .23438rem) center;
    }

    .was-validated input:required:invalid {
        border-color: #ff0000;
        background-image: url(/App_themes/assets/images/error-form.png);
        background-repeat: no-repeat;
        background-position: right calc(.375em + 0.1rem) center;
    }

    .pull-left {
        float: left !important;
    }

    .pull-right {
        float: right !important;
    }
</style>

<main class="wrapper">
    <!-- Thêm nhân viên -->
    <div class="modal fade default-popup popup-them-nv" id="them-nhan-vien" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title title-popup" id="exampleModalLongTitle">Thêm/sửa nhân viên</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-6">
                                <form class="form-2-col" id="staff-info">
                                    <input type="hidden" name="idNV" />
                                    <div class="form-row">
                                        <label for="">Mã NV</label>
                                        <input type="text" name="maNV" required>
                                        <div id="msg-staff"></div>
                                    </div>
                                    <div class="form-row">
                                        <label for="">Tên NV</label>
                                        <input type="text" name="tenNV" required>
                                    </div>
                                    <div class="form-row">
                                        <label for="">Ngày sinh</label>
                                        <input type="text" class="datetimepicker datepicker date-only" name="ngaySinhNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Giới tính</label>
                                        <select name="slGioiTinhNV">
                                            <option value="1">Nam</option>
                                            <option value="2">Nữ</option>
                                        </select>
                                    </div>
                                    <div class="form-row">
                                        <label for="">Chức vụ</label>
                                        <input type="text" name="chucVuNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Lương</label>
                                        <input type="text" data-type="currency" name="luongNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Số CMND</label>
                                        <input type="text" data-type="number" name="soCMNDNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Địa chỉ</label>
                                        <input type="text" name="diaChiNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Điện thoại</label>
                                        <input type="text" data-type="number" name="dienThoaiNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Di động</label>
                                        <input type="text" data-type="number" name="diDongNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Email</label>
                                        <input type="text" name="emailNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Làm việc tại CN</label>
                                        <select name="slShowRoom">
                                            <option value="0">--Chọn chi nhánh--</option>
                                        </select>
                                    </div>
                                    <div class="form-row">
                                        <label for="">Nhóm</label>
                                        <select name="slNhomNhanVien">
                                            <option value="0">--Chọn nhóm nhân viên--</option>
                                        </select>
                                        <span class="search-icon" id="btn-nhom-nhan-vien">
                                            <i class="fas fa-search"></i>
                                        </span>
                                    </div>
                                    <div class="form-row">
                                        <label for="">Quê quán</label>
                                        <input type="text" name="queQuanNV">
                                    </div>
                                    <div class="form-row">
                                        <label for="">Gia đình</label>
                                        <input type="text" name="giaDinhNV">
                                    </div>
                                    @*<div class="form-row">
                                            <label for="">Theo dõi</label>
                                            <input type="checkbox" class="editor-active" name="cbFollow" />
                                        </div>*@
                                </form>
                            </div>
                            <div class="col-md-6">
                                <div class="box-up-img text-center">
                                    <h2>Up ảnh cá nhân tại đây</h2>
                                    <div class="avatar-upload">
                                        <div class="avatar-edit">
                                            <input type='file' id="imageUpload"
                                                   accept=".png, .jpg, .jpeg" />
                                            <label for="imageUpload">
                                                <i class="fas fa-cloud-upload-alt"></i>
                                            </label>
                                        </div>
                                        <div class="avatar-preview">
                                            <div id="imagePreview"
                                                 style="background-image: url('../App_Themes/assets/images/logo-kimthanh.png');">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="form-row mr-auto">
                        <label for="">Theo dõi</label>
                        <input type="checkbox" class="editor-active" name="theoDoiNV" />
                    </div>
                    <button type="button" class="btn btn-primary" id="btn-save-nhan-vien">Lưu</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Danh mục nhóm nhân viên -->
    <div class="modal fade default-popup popup-them-nhom-nv" id="them-nhom-nv" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title title-popup" id="exampleModalLongTitle"> Danh mục nhóm nhân viên </h5>
                    <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="list-button text-left">
                        <a href="#" class="btn btn-add inline" id="btn-insert-nhom-nhan-vien">
                            <img src="~/App_Themes/assets/images/btn-add.png" alt=""
                                 class="inline"> <span class="inline">Thêm</span>
                        </a>
                        <a href="#" class="btn btn-fix inline" id="btn-update-nhom-nhan-vien" style="font-weight:500;">
                            <img src="~/App_Themes/assets/images/btn-fix.png"
                                 alt="" class="inline"><span class="inline">Sửa</span>
                        </a>
                        <a href="#" class="btn btn-fix inline" id="btn-delete-nhom-nhan-vien">
                            <img src="~/App_Themes/assets/images/btn-del.png" alt=""
                                 class="inline"><span class="inline">Xóa</span>
                        </a>
                        <a href="#" class="btn btn-fix inline" id="btn-export-nhom-nhan-vien">
                            <img src="~/App_Themes/assets/images/btn-export.png" alt=""
                                 class="inline"><span class="inline">Xuất</span>
                        </a>
                    </div>
                    <div class="wrap-height-table">
                        <table class="table dislay" id="table-nhom-nv">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Nhóm NV</th>
                                    <th>Mô tả</th>
                                    <th>Hoa Hồng</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Thêm nhóm nhân viên -->
    <div class="modal fade form-add-group-user default-popup" id="form-add-group-user" tabindex="-1" role="dialog" aria-labelledby="form-add-group-user" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title title-popup" id="exampleModalLabel"> Thêm/sửa nhóm nhân viên </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" name="idNhomNhanVien" value="" />
                    <div>
                        <div class="form-group">
                            <label for="group-staff-name" class="col-form-label">Tên nhóm user:</label>
                            <input type="text" name="tenNhomNhanVien" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="group-staff-note" class="col-form-label">Ghi chú:</label>
                            <textarea name="ghiChuNhomNhanVien" cols="30" rows="3" class="form-control" style="width: 60%;font-size: 12px;"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="group-staff-commission" class="col-form-label">Hoa hồng: </label>
                            <input type="text" name="commissionNhomNhanVien" class="form-control" data-type="currency">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="btn-save-nhom-nhan-vien">Lưu</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Thoát</button>
                </div>
            </div>
        </div>
    </div>
    <!--Danh mục nhân viên-->
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="ql-user user-table wrap-table-pq">
                    <div class="user-table__header">
                        <div class="row justify-content-end">
                            <div class="col-md-7">
                                <div class="list-button text-left">
                                    <a href="#" class="btn btn-add inline" id="btn-insert-nhan-vien">
                                        <img src="~/App_Themes/assets/images/btn-add.png"
                                             alt="" class="inline">
                                        <span class="inline">Thêm</span>
                                    </a>
                                    <a href="#" class="btn btn-fix inline" id="btn-update-nhan-vien">
                                        <img src="~/App_Themes/assets/images/btn-fix.png"
                                             alt="" class="inline"><span class="inline">Sửa</span>
                                    </a>
                                    <a href="#" class="btn btn-del inline" id="btn-delete-nhan-vien">
                                        <img src="~/App_Themes/assets/images/btn-del.png"
                                             alt="" class="inline"><span class="inline">Xóa</span>
                                    </a>
                                    <a href="#" class="btn btn-export inline" id="btn-export-nhan-vien">
                                        <img src="~/App_Themes/assets/images/btn-export.png"
                                             alt="" class="inline"><span class="inline">Xuất</span>
                                    </a>
                                    <a href="@Url.Action("Index","NhanVien")" class="btn btn-import inline">
                                        <img src="~/App_Themes/assets/images/btn-import.png"
                                             alt="" class="inline"><span class="inline">Nạp</span>
                                    </a>
                                    <a href="#excel-nhanvien" data-toggle="modal" class="btn btn-export inline">
                                        <img src="/App_Themes/assets/images/btn-import-2.png"
                                             alt="" class="inline"><span class="inline">Nhập</span>
                                    </a>
                                    @*<a href="#" class="btn btn-print inline" id="btn-print-nhan-vien">
            <img src="~/App_Themes/assets/images/btn-print.png"
                 alt="" class="inline"><span class="inline">In</span>
        </a>
        <a href="http://htsoft.vn/phan-mem-quan-ly/index.htm" class="btn btn-question inline" target="_blank">
            <img src="~/App_Themes/assets/images/question.png"
                 alt="" class="inline"><span class="inline">Hỏi</span>
        </a>*@
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="wrap-height-table">
                        <table class="table display nowrap row-border order-column table-striped table-fixed table-nv" style="width:100%" id="table-nv">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Mã NV</th>
                                    <th>Tên NV</th>
                                    <th>Địa chỉ</th>
                                    <th>Điện thoại</th>
                                    <th style="min-width: 100px">Ngày sinh</th>
                                    <th>Giới tính</th>
                                    <th>Chức vụ</th>
                                    <th>Mức lương</th>
                                    <th>CMTND</th>
                                    <th>Theo dõi</th>
                                    <th>Người QL</th>
                                    <th>Ghi chú</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Excel nhân viên-->
    <div class="modal fade default-popup popup-danh-sach-khach-hang" id="excel-nhanvien" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title title-popup" id="exampleModalLongTitle">
                        Import nhân viên
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid wrap-table-2 table-mat-hang p-0">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="wrap-height-table-2 bg-white p-2 mt-2 border" style="max-height: 250px;">
                                    <p class="title-special">Danh sách nhân viên chưa tồn tại trong hệ thống</p>
                                    <div class="box-border p-2" style="border: none;">
                                        <table class="table display table-striped" style="width: 100%;" id="table-nhan-vien-chua-co">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Mã NV</th>
                                                    <th>Tên NV</th>
                                                    <th>Địa chỉ</th>
                                                    <th>Điện thoại</th>
                                                    <th>Ngày sinh</th>
                                                    <th>Giới tính</th>
                                                    <th>Chức vụ</th>
                                                    <th>Mức lương</th>
                                                    <th>CMTND</th>
                                                    <th>Theo dõi</th>
                                                    <th>Người QL</th>
                                                    <th>Ghi chú</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="form-inline" style="margin-top: .5rem !important;">
                                    <span>Số bản ghi: </span> <span class="ml-5 count-new-nhan-vien">0</span>
                                    @*<button type="button" class="btn btn-primary" style="margin-left: 15%;" disabled>Ghi thêm mới</button>*@
                                    <div class="ml-auto">
                                        <button type="button" class="btn btn-primary btn-save-nhan-vien-excel" value="0" disabled="disabled">Ghi thêm mới</button>
                                        @*<button type="button" class="btn btn-primary">Export</button>
                                            <button type="button" class="btn btn-primary">Validate</button>*@
                                    </div>
                                </div>

                                <div class="wrap-height-table-2 bg-white p-2 mt-2 border" style="max-height: 250px;">
                                    <p class="title-special">Danh sách nhân viên đã tồn tại trong hệ thống</p>
                                    <div class="box-border p-2" style="border: none;">
                                        <table class="table display table-striped" style="width: 100%;" id="table-nhan-vien-da-co">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Mã NV</th>
                                                    <th>Tên NV</th>
                                                    <th>Địa chỉ</th>
                                                    <th>Điện thoại</th>
                                                    <th>Ngày sinh</th>
                                                    <th>Giới tính</th>
                                                    <th>Chức vụ</th>
                                                    <th>Mức lương</th>
                                                    <th>CMTND</th>
                                                    <th>Theo dõi</th>
                                                    <th>Người QL</th>
                                                    <th>Ghi chú</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="form-inline" style="margin-top: .5rem !important;">
                                    <span>Số bản ghi: </span> <span class="ml-5 count-old-nhan-vien">0</span>
                                    @*<button type="button" class="btn btn-primary" style="margin-left: 15%;" disabled>Ghi sửa thông tin</button>*@
                                    <div class="ml-auto">
                                        <button type="button" class="btn btn-primary btn-save-nhan-vien-excel" value="1" disabled="disabled">Ghi sửa thông tin</button>
                                        @*<button type="button" class="btn btn-primary">Export</button>*@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer mt-2">
                        <div class="w-100">
                            <span>Tìm Excel Sheets để nhập</span>
                            <select name="slExcel-nhanvien" id="" class="w-25"></select>
                            <input type="file" name="excelNhanVien" style="display: none">
                            <button id="btn-import-nhan-vien" class="btn btn-default">
                                <span class="inline">Tìm file export</span>
                            </button>
                        </div>

                        <button type="button" id="btn-reset-nhan-vien-excel" class="btn btn-primary">Refrersh</button>
                        <button type="button" class="btn btn-primary" id="btn-create-nhan-vien-excel">Tạo template</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Thoát</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
@section myScripts{
    <script src="~/PageScript/NhanVien/nhanvien.js"></script>
}